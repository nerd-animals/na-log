<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/na-log/_next/static/css/dc2dab46305a2006.css" crossorigin="" data-precedence="next"/><link rel="stylesheet" href="/na-log/_next/static/css/1a2bc1315f96f886.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/na-log/_next/static/chunks/webpack-af9be83a221a9b98.js" crossorigin=""/><script src="/na-log/_next/static/chunks/fd9d1056-91ddfd1ae3c17ccb.js" async="" crossorigin=""></script><script src="/na-log/_next/static/chunks/8069-9366f3d4d744de8e.js" async="" crossorigin=""></script><script src="/na-log/_next/static/chunks/main-app-187b85c3d7217c5a.js" async="" crossorigin=""></script><script src="/na-log/_next/static/chunks/c24cc598-2cbcb84d2b01d13c.js" async=""></script><script src="/na-log/_next/static/chunks/1244-7dd87e3975005240.js" async=""></script><script src="/na-log/_next/static/chunks/app/(contents)/post/%5B...slug%5D/page-c3830913be8f137b.js" async=""></script><script src="/na-log/_next/static/chunks/5250-f902508d1dda8599.js" async=""></script><script src="/na-log/_next/static/chunks/app/(contents)/layout-f321296cefda825a.js" async=""></script><title>…state와 (prev) ⇒ …prev의 차이</title><meta name="description" content="react state에서 prev는 무엇을 담당해줄까요?"/><meta property="og:title" content="…state와 (prev) ⇒ …prev의 차이"/><meta property="og:description" content="react state에서 prev는 무엇을 담당해줄까요?"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="…state와 (prev) ⇒ …prev의 차이"/><meta name="twitter:description" content="react state에서 prev는 무엇을 담당해줄까요?"/><link rel="icon" href="/na-log/favicon.ico" type="image/x-icon" sizes="64x64"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/><script src="/na-log/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script></head><body><div class="page-wrapper"><div class="page-header-wrapper"><header class="page-header"><div class="home-section"><a class="link" href="/na-log">na-log</a></div><div class="category-section"><a class="link" href="/na-log/write">write</a><a class="link" href="/na-log/about">about</a></div></header></div><main class="contents-wrapper"><div class="post-wrapper"><div class="post-header"><div class="post-title">…state와 (prev) ⇒ …prev의 차이</div><div class="post-info"><div class="post-tags"><div class="post-tag">front-end</div><div class="post-tag">react</div></div><div class="post-date">🗓️<!-- --> <!-- -->Tue, March 26, 2024</div></div><div class="post-author">✍️ written by <strong>otter</strong></div></div><div class="post-content"><div></div></div></div><section></section></main><div class="footer-wrapper"><footer class="page-footer">copyright © 2024 by NerdAnimals</footer></div></div><script src="/na-log/_next/static/chunks/webpack-af9be83a221a9b98.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/na-log/_next/static/css/dc2dab46305a2006.css\",\"style\",{\"crossOrigin\":\"\"}]\n0:\"$L2\"\n"])</script><script>self.__next_f.push([1,"3:HL[\"/na-log/_next/static/css/1a2bc1315f96f886.css\",\"style\",{\"crossOrigin\":\"\"}]\n"])</script><script>self.__next_f.push([1,"4:I[47690,[],\"\"]\n6:I[20718,[\"3067\",\"static/chunks/c24cc598-2cbcb84d2b01d13c.js\",\"1244\",\"static/chunks/1244-7dd87e3975005240.js\",\"8059\",\"static/chunks/app/(contents)/post/%5B...slug%5D/page-c3830913be8f137b.js\"],\"\"]\n8:I[89203,[\"3067\",\"static/chunks/c24cc598-2cbcb84d2b01d13c.js\",\"1244\",\"static/chunks/1244-7dd87e3975005240.js\",\"8059\",\"static/chunks/app/(contents)/post/%5B...slug%5D/page-c3830913be8f137b.js\"],\"\"]\n9:I[5613,[],\"\"]\nb:I[31778,[],\"\"]\nc:I[25250,[\"5250\",\"static/chunks/5250-f902508d1dda8599.js\",\"7894\","])</script><script>self.__next_f.push([1,"\"static/chunks/app/(contents)/layout-f321296cefda825a.js\"],\"\"]\n12:I[48955,[],\"\"]\n7:Tc9b,"])</script><script>self.__next_f.push([1,"\u003caside\u003e📝 prev (previous)\n1. 형용사 (시기적으로 이야기 중인 사건·사물) 이전[전]의, 먼젓번의 (=prior)\n2. 형용사 (이야기 중인 시간) 바로 앞의 (=preceding)\n\u003c/aside\u003e\n\n---\n\n```tsx\nimport { useState } from 'react';\n\nexport default function Write() {\n  const [post, setPost] = useState({\n    title: '',\n    tag: '',\n  });\n\n  const onChangeInputPost = (e) =\u003e {\n    setPost({...post, [e.target.className]: e.target.value});\n  };\n  \n    \u003cdiv className=\"write-wrapper\"\u003e\n      \u003cdiv className=\"write-editor\"\u003e\n        \u003cdiv className=\"front-matter\"\u003e\n          \u003cinput\n            className=\"title\"\n            type=\"text\"\n            onChange={onChangeInputPost}\n          /\u003e\n          \u003cinput\n            className=\"tags\"\n            type=\"text\"\n            onChange={onChangeInputPost}\n          /\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n  \u003c/div\u003e\n```\n\n현재 코드도 나쁘지는 않다.\\\n하지만, React에서 state 실행은 동작함수가 여러 개 실행되더라도 업데이트를 **대기열, 임시 저장공간에 저장'만'** 되기 때문에 이전 상태, 즉 **최신 값을 보장하지 않는다.**\n\n여러 개의 입력 필드가 있을 때, 동시에 여러 필드를 수정한다면, 최신 값을 고려하지 않을 수도 있다는 것이다.\\\n즉, **업데이트가 안될 수도** 있는 가능성이 있다는 것.\n\n## prev 알아보기\n\n```jsx\n const [state, setState] = useState(0);\n  const sumAll = () =\u003e {\n    setState(state + 1);\n    setState(state + 2);\n    setState(state + 3);\n    setState(state + 4);\n  };\n  const sumAllWithPrevState = () =\u003e {\n    setState((prev) =\u003e prev + 1);\n    setState((prev) =\u003e prev + 2);\n    setState((prev) =\u003e prev + 3);\n    setState((prev) =\u003e prev + 4);\n  };\n\n  return (\n    \u003c\u003e\n      \u003cdiv\u003e결과는 : {state}\u003c/div\u003e\n      \u003cbutton type='button' onClick={sumAll}\u003e\n        sumAll\n      \u003c/button\u003e\n      \u003cbutton type='button' onClick={sumAllWithPrevState}\u003e\n        sumAllWithPrevState\n      \u003c/button\u003e\n    \u003c/\u003e\n  );\n```\n\n좋아보이는 [예시 코드](https://velog.io/@mh-yeo/React-prevState-in-setState)가 있어 [예제](https://otterbits.github.io/no-answer/)를 만들어보았다. (감사합니다.)\n\n`sumAll` : 최신 값을 고려하지 않고 한다면, `4`가 나올 것이고,\n\n`sumAllWithPrevState` : 최신 값을 고려한다면, `10`이 나올 것이다.\n\n## 개선 코드\n\n```tsx\nimport { useState } from 'react';\n\nexport default function Write() {\n  const [post, setPost] = useState({\n    title: '',\n    tag: '',\n  });\n\n\t  const onChangeInputPost = (e) =\u003e {\n    setPost((prevState) =\u003e ({\n      ...prevState,\n      [e.target.className]: e.target.value,\n    }));\n  };\n\n  \n    \u003cdiv className=\"write-wrapper\"\u003e\n      \u003cdiv className=\"write-editor\"\u003e\n        \u003cdiv className=\"front-matter\"\u003e\n          \u003cinput\n            className=\"title\"\n            type=\"text\"\n            onChange={onChangeInputPost}\n          /\u003e\n          \u003cinput\n            className=\"tags\"\n            type=\"text\"\n            onChange={onChangeInputPost}\n          /\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n  \u003c/div\u003e\n```\n\n때문에 이렇게 state 함수인 `setPost` 함수가 `prevState`를 통해 최신 값으로 업데이트하도록 개선하였다.\n\n`💣`no-answer 하나 배웠다!"])</script><script>self.__next_f.push([1,"a:[\"slug\",\"front-end/react/the-difference-between-state-and-prev\",\"c\"]\nd:{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"}\ne:{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"}\nf:{\"display\":\"inline-block\"}\n10:{\"fontSize\":14,\"f"])</script><script>self.__next_f.push([1,"ontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0}\n13:[]\n"])</script><script>self.__next_f.push([1,"2:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/na-log/_next/static/css/dc2dab46305a2006.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],[\"$\",\"$L4\",null,{\"buildId\":\"24XplxUeNuaszyxwmEKpQ\",\"assetPrefix\":\"/na-log\",\"initialCanonicalUrl\":\"/post/front-end/react/the-difference-between-state-and-prev\",\"initialTree\":[\"\",{\"children\":[\"(contents)\",{\"children\":[\"post\",{\"children\":[[\"slug\",\"front-end/react/the-difference-between-state-and-prev\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"front-end\\\",\\\"react\\\",\\\"the-difference-between-state-and-prev\\\"]}\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"(contents)\",{\"children\":[\"post\",{\"children\":[[\"slug\",\"front-end/react/the-difference-between-state-and-prev\",\"c\"],{\"children\":[\"__PAGE__\",{},[\"$L5\",[[\"$\",\"div\",null,{\"className\":\"post-wrapper\",\"children\":[[\"$\",\"div\",null,{\"className\":\"post-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"post-title\",\"children\":\"…state와 (prev) ⇒ …prev의 차이\"}],[\"$\",\"div\",null,{\"className\":\"post-info\",\"children\":[[\"$\",\"div\",null,{\"className\":\"post-tags\",\"children\":[[\"$\",\"div\",\"front-end\",{\"className\":\"post-tag\",\"children\":\"front-end\"}],[\"$\",\"div\",\"react\",{\"className\":\"post-tag\",\"children\":\"react\"}]]}],[\"$\",\"div\",null,{\"className\":\"post-date\",\"children\":[\"🗓️\",\" \",\"Tue, March 26, 2024\"]}]]}],[\"$\",\"div\",null,{\"className\":\"post-author\",\"children\":[\"✍️ written by \",[\"$\",\"strong\",null,{\"children\":\"otter\"}]]}]]}],[\"$\",\"div\",null,{\"className\":\"post-content\",\"children\":[\"$\",\"$L6\",null,{\"content\":\"$7\"}]}]]}],[\"$\",\"$L8\",null,{}]],null]]},[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(contents)\",\"children\",\"post\",\"children\",\"$a\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/na-log/_next/static/css/1a2bc1315f96f886.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}]]},[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(contents)\",\"children\",\"post\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]]},[null,[[\"$\",\"div\",null,{\"className\":\"page-header-wrapper\",\"children\":[\"$\",\"header\",null,{\"className\":\"page-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"home-section\",\"children\":[\"$\",\"$Lc\",null,{\"className\":\"link\",\"href\":\"/\",\"children\":\"na-log\"}]}],[\"$\",\"div\",null,{\"className\":\"category-section\",\"children\":[[\"$\",\"$Lc\",null,{\"className\":\"link\",\"href\":\"/write\",\"children\":\"write\"}],[\"$\",\"$Lc\",null,{\"className\":\"link\",\"href\":\"/about\",\"children\":\"about\"}]]}]]}]}],[\"$\",\"main\",null,{\"className\":\"contents-wrapper\",\"children\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(contents)\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]}]],null]]},[null,[\"$\",\"html\",null,{\"lang\":\"ko\",\"children\":[[\"$\",\"head\",null,{\"children\":[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"href\":\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css\"}]}],[\"$\",\"body\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"page-wrapper\",\"children\":[[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":\"$d\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":\"$e\",\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":\"$f\",\"children\":[\"$\",\"h2\",null,{\"style\":\"$10\",\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}],[\"$\",\"div\",null,{\"className\":\"footer-wrapper\",\"children\":[\"$\",\"footer\",null,{\"className\":\"page-footer\",\"children\":\"copyright © 2024 by NerdAnimals\"}]}]]}]}]]}],null]],\"initialHead\":[false,\"$L11\"],\"globalErrorComponent\":\"$12\",\"missingSlots\":\"$W13\"}]]\n"])</script><script>self.__next_f.push([1,"11:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"…state와 (prev) ⇒ …prev의 차이\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"react state에서 prev는 무엇을 담당해줄까요?\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:title\",\"content\":\"…state와 (prev) ⇒ …prev의 차이\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:description\",\"content\":\"react state에서 prev는 무엇을 담당해줄까요?\"}],[\"$\",\"meta\",\"6\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"7\",{\"name\":\"twitter:title\",\"content\":\"…state와 (prev) ⇒ …prev의 차이\"}],[\"$\",\"meta\",\"8\",{\"name\":\"twitter:description\",\"content\":\"react state에서 prev는 무엇을 담당해줄까요?\"}],[\"$\",\"link\",\"9\",{\"rel\":\"icon\",\"href\":\"/na-log/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"64x64\"}]]\n"])</script><script>self.__next_f.push([1,"5:null\n"])</script><script>self.__next_f.push([1,""])</script></body></html>